<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux用户管理 | Linux</title>
    <meta name="description" content="Linux新手教程,中文,免费,零起点,完整示例">
    <link rel="icon" href="favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.2046f9ca.css" as="style"><link rel="preload" href="/assets/js/app.356c29b7.js" as="script"><link rel="preload" href="/assets/js/2.071cde55.js" as="script"><link rel="preload" href="/assets/js/17.667f8ebf.js" as="script"><link rel="prefetch" href="/assets/js/10.3ac37453.js"><link rel="prefetch" href="/assets/js/11.9080ca29.js"><link rel="prefetch" href="/assets/js/12.359cff30.js"><link rel="prefetch" href="/assets/js/13.47c1f714.js"><link rel="prefetch" href="/assets/js/14.1d0e8aca.js"><link rel="prefetch" href="/assets/js/15.60f79bcd.js"><link rel="prefetch" href="/assets/js/16.76acb932.js"><link rel="prefetch" href="/assets/js/18.75175ef4.js"><link rel="prefetch" href="/assets/js/19.5779db6b.js"><link rel="prefetch" href="/assets/js/3.5b272129.js"><link rel="prefetch" href="/assets/js/4.38a9e506.js"><link rel="prefetch" href="/assets/js/5.ae12d47a.js"><link rel="prefetch" href="/assets/js/6.9c0dc546.js"><link rel="prefetch" href="/assets/js/7.c2460eca.js"><link rel="prefetch" href="/assets/js/8.6732e1dc.js"><link rel="prefetch" href="/assets/js/9.c4de826e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2046f9ca.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Linux</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="https://github.com/eqzhang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.cnblogs.com/zeq912" target="_blank" rel="noopener noreferrer" class="nav-link external">
  cnblogs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="https://github.com/eqzhang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.cnblogs.com/zeq912" target="_blank" rel="noopener noreferrer" class="nav-link external">
  cnblogs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/linux/" class="sidebar-link">介绍</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/linux/understand-linux.html" class="sidebar-link">了解Linux</a></li><li><a href="/linux/linux-occupation.html" class="sidebar-link">了解Linux相关职业</a></li><li><a href="/linux/command.html" class="sidebar-link">Linux常用命令汇总</a></li><li><a href="/linux/startup.html" class="sidebar-link">Linux启动流程</a></li><li><a href="/linux/directory.html" class="sidebar-link">Linux目录结构</a></li><li><a href="/linux/file-management.html" class="sidebar-link">Linux文件与目录管理</a></li><li><a href="/linux/vim.html" class="sidebar-link">Linux文件编辑</a></li><li><a href="/linux/user.html" class="active sidebar-link">Linux用户管理</a></li><li><a href="/linux/system-symbol.html" class="sidebar-link">Linux系统符号</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>深入</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="linux用户管理"><a href="#linux用户管理" aria-hidden="true" class="header-anchor">#</a> Linux用户管理</h1> <p><a name="WW8m0"></a></p> <h1 id="用户基本概述"><a href="#用户基本概述" aria-hidden="true" class="header-anchor">#</a> 用户基本概述</h1> <p>Linux系统是一个多用户多任务的分时操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统。<br>用户的账号一方面可以帮助系统管理员对使用系统的用户进行跟踪，并控制他们对系统资源的访问；另一方面也可以帮助用户组织文件，并为用户提供安全性保护。<br>每个用户账号都拥有一个唯一的用户名和各自的口令。<br>用户在登录时键入正确的用户名和口令后，就能够进入系统和自己的主目录。<br>实现用户账号的管理，要完成的工作主要有如下几个方面：</p> <ul><li>用户账号的添加、删除与修改。</li> <li>用户口令的管理。</li> <li>用户组的管理。
<a name="qQ9Fi"></a></li></ul> <h1 id="查询用户信息"><a href="#查询用户信息" aria-hidden="true" class="header-anchor">#</a> 查询用户信息</h1> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">id</span>        显示用户信息 uid gid 和属于用户组
w         显示谁登陆系统 并 在干什么
last      所有用户的每次的登录情况 
lastlog   所有用户最近一次的登录情况
</code></pre></div><p><a name="gfufa"></a></p> <h1 id="linux用户管理-2"><a href="#linux用户管理-2" aria-hidden="true" class="header-anchor">#</a> Linux用户管理</h1> <p><a name="3fbOb"></a></p> <h2 id="用户分类"><a href="#用户分类" aria-hidden="true" class="header-anchor">#</a> 用户分类</h2> <p><strong>1、管理员用户</strong><br>默认是root用户，它的UID 和GID均为0，系统安装完成后自动生成的，默认通过它就可以登录系统，拥有最高的管理权限。<br><strong>2、普通用户</strong><br>由系统管理员root创建的，创建完成后可以登录系统，但默认无法创建、修改和删除任何管理员下的文件；UID从500-65535<br><strong>3、系统用户（或虚拟用户）</strong><br>安装系统后默认生成的用户，大多数不能登录系统，但它们是系统正常运行不可缺少的，它们的存在主要是为了方便系统管理，满足相应的系统进程对文件所属用户的要求；UID从 1-499</p> <p><a name="azaZP"></a></p> <h2 id="创建用户"><a href="#创建用户" aria-hidden="true" class="header-anchor">#</a> 创建用户</h2> <p><code>useradd</code><br>语法:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">useradd</span>  <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>login<span class="token punctuation">]</span> 
<span class="token function">useradd</span>  <span class="token punctuation">[</span>选项<span class="token punctuation">]</span> <span class="token punctuation">[</span>用户名<span class="token punctuation">]</span>
</code></pre></div><p>选项:</p> <ul><li>-u  指定uid,这个值是唯一的</li> <li>-s  shell 命令解释器 （默认是/bin/bash）</li></ul> <p>虚拟用户命令解释器:  /sbin/nologin</p> <ul><li>-c 创建用户时，添加个人信息</li> <li>-M  不创建家目录  （sM)</li> <li>-g  指定用户组名称</li> <li>-d 目录 指定用户主目录，如果此目录不存在，则同时使用-m选项，可以创建主目录</li> <li>-G 用户组，用户组 指定用户所属的附加组</li></ul> <p>实例:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">useradd</span> -u <span class="token number">999</span>  -s /sbin/nologin -M lidao999
</code></pre></div><p>此命令添加一个用户lidao999 uid为999 禁止 登录系统不创建家目录</p> <p><a name="KOvug"></a></p> <h2 id="删除用户"><a href="#删除用户" aria-hidden="true" class="header-anchor">#</a> 删除用户</h2> <p><code>userdel</code><br>删除用户，但不会删除用户家目录<br>语法:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">userdel</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>login<span class="token punctuation">]</span>
<span class="token function">userdel</span> <span class="token punctuation">[</span>选项<span class="token punctuation">]</span> <span class="token punctuation">[</span>用户名<span class="token punctuation">]</span>
</code></pre></div><p>选项:</p> <ul><li>-r    删除用户的同时，删除与用户相关的所有文件(包含邮箱信息)</li> <li>-f    强制删除用户</li></ul> <div class="tip custom-block"><p>注意：<br>
一般不要删除，可以通过注释/etc/passwd</p></div> <p><a name="GBBlX"></a></p> <h2 id="修改密码"><a href="#修改密码" aria-hidden="true" class="header-anchor">#</a> 修改密码</h2> <p><code>passwd</code><br>语法:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">passwd</span> <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token punctuation">[</span>username<span class="token punctuation">]</span>
<span class="token function">passwd</span> <span class="token punctuation">[</span>选项<span class="token punctuation">]</span> <span class="token punctuation">[</span>用户名<span class="token punctuation">]</span>
</code></pre></div><p>选项</p> <ul><li>--stdin  非交互式设置密码</li></ul> <p>实例1:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">passwd</span>           <span class="token comment">#命令</span>
Changing password <span class="token keyword">for</span> user root.  修改root用户的密码,当前用户是root
New password:    <span class="token comment">#输入新密码</span>
Retype new password:        <span class="token comment">#重新输入新密码</span>
passwd: all authentication tokens updated successfully.
注：普通用户使用passwd 修改密码时，必须满足密码复杂性要求；root 修改密码不需要满足密码复杂性。
</code></pre></div><p>此命令修改当前用户的密码</p> <p>实例2:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">passwd</span> alan   <span class="token comment">#修改alan用户的密码</span>
Changing password <span class="token keyword">for</span> user alan.
New password: 
Retype new password: 
passwd: all authentication tokens updated successfully.  <span class="token comment">#修改成功</span>
</code></pre></div><p>此命令修改普通用户的密码</p> <p>实例3:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;123456&quot;</span> <span class="token operator">|</span><span class="token function">passwd</span> --stdin alan   <span class="token comment">#给alan用户设置密码为123456</span>
Changing password <span class="token keyword">for</span> user a1.
passwd: all authentication tokens updated successfully.
</code></pre></div><p>此命令非交互式设置密码</p> <p><a name="4SRPN"></a></p> <h2 id="修改用户信息"><a href="#修改用户信息" aria-hidden="true" class="header-anchor">#</a> 修改用户信息</h2> <p><code>usermod</code><br>语法:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">usermod</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>login<span class="token punctuation">]</span>
<span class="token function">usermod</span> <span class="token punctuation">[</span>选项<span class="token punctuation">]</span> <span class="token punctuation">[</span>用户名<span class="token punctuation">]</span>
</code></pre></div><p>选项:</p> <ul><li>-c 修改用户的个人信息，同useradd 的-c功能</li> <li>-g 修改用户对应的用户组，同 useradd的-d功能</li> <li>-s 修改用户登录后使用的shell名称，同useradd的-s功能</li> <li>-u 修改用户的uid ，同useradd 的-u功能</li> <li>-l 修改用户的名称</li></ul> <p>常用的选项包括<code>-c, -d, -m, -g, -G, -s, -u以及-o等</code>，这些选项的意义与<code>useradd</code>命令中的选项一样，可以为用户指定新的资源值。</p> <p><a name="ryP5a"></a></p> <h1 id="linux系统用户组的管理"><a href="#linux系统用户组的管理" aria-hidden="true" class="header-anchor">#</a> Linux系统用户组的管理</h1> <p>每个用户都有一个用户组，系统可以对一个用户组中的所有用户进行集中管理。不同Linux 系统对用户组的规定有所不同，如Linux下的用户属于与它同名的用户组，这个用户组在创建用户时同时创建。<br>用户组的管理涉及用户组的添加、删除和修改。组的增加、删除和修改实际上就是对/etc/group文件的更新。</p> <p><a name="pKjaa"></a></p> <h2 id="用户组的特点"><a href="#用户组的特点" aria-hidden="true" class="header-anchor">#</a> 用户组的特点</h2> <p>Linux系统中的用户组（group）就是具有相同特征的用户的集合；<br>有时我们需要让多个用户具有相同的权限，就要创建组；<br>将用户分组是Linux系统中对用户进行管理及控制访问权限的一种手段；<br>一个用户可以加入到多个组。</p> <p><a name="GQJ4f"></a></p> <h2 id="增加用户组"><a href="#增加用户组" aria-hidden="true" class="header-anchor">#</a> 增加用户组</h2> <p><code>groupadd</code> <br>语法：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">groupadd</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>group<span class="token punctuation">]</span>      
<span class="token function">groupadd</span> <span class="token punctuation">[</span>选项<span class="token punctuation">]</span> <span class="token punctuation">[</span>用户组<span class="token punctuation">]</span>
</code></pre></div><p>选项:</p> <ul><li>-g GID 指定新用户组的组标识号（GID）。</li> <li>-o 一般与-g选项同时使用，表示新用户组的GID可以与系统已有用户组的GID相同。</li></ul> <p>实例：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">groupadd</span> group1
</code></pre></div><p>此命令向系统中增加了一个新组group1，新组的组标识号是在当前已有的最大组标识号的基础上加1。</p> <p><a name="f1EW1"></a></p> <h2 id="删除已有用户组"><a href="#删除已有用户组" aria-hidden="true" class="header-anchor">#</a> 删除已有用户组</h2> <p><code>groupdel</code> <br>语法:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">groupadd</span>  <span class="token punctuation">[</span>group<span class="token punctuation">]</span>      
<span class="token function">groupadd</span>  <span class="token punctuation">[</span>用户组<span class="token punctuation">]</span>
</code></pre></div><p>例如：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">groupdel</span> group1
</code></pre></div><p>此命令从系统中删除组group1。</p> <p><a name="0IS9y"></a></p> <h2 id="修改用户组的属性"><a href="#修改用户组的属性" aria-hidden="true" class="header-anchor">#</a> 修改用户组的属性</h2> <p><code>groupmod</code> <br>语法:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">groupmod</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>group<span class="token punctuation">]</span>      
<span class="token function">groupmod</span> <span class="token punctuation">[</span>选项<span class="token punctuation">]</span> <span class="token punctuation">[</span>用户组<span class="token punctuation">]</span>
</code></pre></div><p>选项:</p> <ul><li>-g GID 为用户组指定新的组标识号。</li> <li>-o 与-g选项同时使用，用户组的新GID可以与系统已有用户组的GID相同。</li> <li>-n新用户组 将用户组的名字改为新名字</li></ul> <p>实例1：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">groupmod</span> -g <span class="token number">102</span> group2
</code></pre></div><p>此命令将组group2的组标识号修改为102。</p> <p>实例2：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">groupmod</span> –g <span class="token number">10000</span> -n group3 group2
</code></pre></div><p>此命令将组group2的标识号改为10000，组名修改为group3。</p> <p><a name="oT0GQ"></a></p> <h1 id="用户及组配置文件"><a href="#用户及组配置文件" aria-hidden="true" class="header-anchor">#</a> 用户及组配置文件</h1> <div class="language-bash extra-class"><pre class="language-bash"><code>ll /etc/passwd /etc/group /etc/shadow /etc/gshadow 
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">1180</span> Aug <span class="token number">13</span> <span class="token number">10</span>:14 /etc/passwd     存放用户信息 
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">614</span> Aug <span class="token number">13</span> <span class="token number">10</span>:16 /etc/group      用户组信息   每个用户组里面有什么用户？ 
---------- <span class="token number">1</span> root root  <span class="token number">873</span> Aug <span class="token number">13</span> <span class="token number">10</span>:49 /etc/shadow     用户密码信息 
---------- <span class="token number">1</span> root root  <span class="token number">501</span> Aug <span class="token number">13</span> <span class="token number">10</span>:16 /etc/gshadow    用户组密码信息
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/linux/vim.html" class="prev">Linux文件编辑</a></span> <span class="next"><a href="/linux/system-symbol.html">Linux系统符号</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.356c29b7.js" defer></script><script src="/assets/js/2.071cde55.js" defer></script><script src="/assets/js/17.667f8ebf.js" defer></script>
  </body>
</html>
